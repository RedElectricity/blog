---
title: "Jujutsu Kaisen Phantom Parade - Unpack log"
draft: false
_build:
  render: never
  list: never
  publishResources: false
---

> æœ¬æ–‡å°†ä¼šæŒç»­æ›´æ–°

> æœ¬æ–‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨, è¯·å‹¿ç”¨äºŽå„ç§éžä¸ªäººçš„è¡Œä¸ºæˆ–è€…å•†ä¸šæ€§è¡Œä¸º
> ðŸ˜­å…ˆè¾ˆçš„é—äº§çœŸæ˜¯èŠ‚çœäº†æˆ‘å¤§éƒ¨åˆ†æ—¶é—´

## å‰è¨€

è‡³äºŽæˆ‘ä¸ºä»€ä¹ˆä¼šå¼€å§‹é€†å‘Jujutsu Kaisen Phantom Parade, åŽŸå› è¿˜æ˜¯é‡Œé¢çš„Live2Dè¿‡äºŽå¥½çœ‹(è™Žå­å’Œäº”æ¡æ˜¯ä¸é”™çš„)

çœŸæ˜¯ç™¾å˜è™Žå­, è¡£æœæŒºå¤šçš„

~~å†ä¹Ÿä¸è§£åŒ…æ—¥æœæ¸¸æˆäº†~~

## è§£åŒ…è¿‡ç¨‹

### åˆ†æžæ¸¸æˆçš„æ•´ä½“

é¦–å…ˆ, æˆ‘ä»¬è¦åˆ†ä¸¤ä¸ªéƒ¨åˆ†: ç”µè„‘ç‰ˆ(DMM)å’Œæ‰‹æœºç‰ˆ

æ€»çš„æ¥è¯´, ä»–ä»¬éƒ½æ˜¯ä½¿ç”¨il2cppç¼–è¯‘çš„(~~åºŸè¯, çŽ°åœ¨å“ªé‡Œæœ‰æ¸¸æˆè¿˜æ˜¯ç”¨mono~~)

- ç”µè„‘ç‰ˆ: ç›´æŽ¥ä»ŽDMMä¸ŠèŽ·å–å³å¯, ä½†æ˜¯è¿™æ¡è·¯åŸºæœ¬ä¸Šæ˜¯æ­»çš„. ä¸ºä»€ä¹ˆå‘¢? åªè¦ä½ æŠŠæ¸¸æˆçš„é€»è¾‘æ–‡ä»¶ `GameAssembly.dll` æ‹–åˆ° `Detect it easy` ä¾¿å¯å¾—çŸ¥æ¸¸æˆæ˜¯ç”¨çš„ `HyperTech Crackproof` (æˆ‘çœ‹åˆ°è¿™ä¸ªåŸºæœ¬ä¸Šå°±çŸ¥é“è¦è½¬æˆ˜äº†), çŽ°åœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰å¯¹äºŽè¿™ä¸ªå£³çš„è„±å£³æ–¹æ³•. å¹¶ä¸”æˆ‘çš„ç”µè„‘æ²¡æ³•ç”¨ `KsDumper`
- æ‰‹æœºç‰ˆ: è¿™ä¸ªæ˜¯çœŸå¥½è§£åŒ…, ç”¨ `GameGuardian` åŠ ä¸Š[è„šæœ¬](https://gameguardian.net/forum/files/file/2769-hidden-global-metadatadat-searcher/)ç›´æŽ¥å¯ä»¥dumpå‡ºæœªåŠ å¯†çš„ `global-metadata.dat` å’Œ `libil2cpp.so`. ä»Žæ–‡ä»¶æ¥çœ‹, è§£åŒ…apkä¸­åªæœ‰ `global-metadata.dat` æ˜¯åŠ å¯†çš„.

å› æ­¤, ä¸ºäº†æ–¹ä¾¿(~~å·æ‡’~~), æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨æ‰‹æœºç‰ˆ+æ¨¡æ‹Ÿå™¨è¿›è¡Œ.

#### å…³äºŽocto

æ ¹æ®ç½‘ç»œä¸Šä»…æœ‰çš„å‡ ä¸ªè§£åŒ…æ•™ç¨‹, octoåŒ…å¾ˆæœ‰å¯èƒ½æ˜¯cyberagentè‡ªå·±æžçš„èµ„æºç®¡ç†ç±»åŒ…, å¹¶ä¸”è·Ÿcyberagentæœ‰å…³çš„å…¬å¸å’Œå·¥ä½œå®¤æœ‰ä½¿ç”¨è¿™ä¸ªåŒ….

å…¶ä¸­åœ¨octoæ–‡ä»¶å¤¹é‡Œé¢å·¦ç¿»å³ç¿»å…¶ä¸­å°±æœ‰ä¸ªå« `octocacheevai` çš„æ–‡ä»¶, æ ¹æ®å…ˆè¾ˆçš„é—äº§[Nireçš„è§£åŒ…](https://github.com/190nm/rein-kuro), è¿™ä¸ªæ–‡ä»¶ç”¨äºŽå­˜å‚¨åœ¨v1æ–‡ä»¶å¤¹ä¸‹èµ„æºçš„ç›®å½•ä»¥åŠå…¶åç§°, æè¿°çš„protobufå¦‚ä¸‹

```protobuf
syntax = "proto3";

message Database {
    int32 revision = 1;
    repeated Data assetBundleList = 2;
    repeated string _tagname = 3;
    repeated Data resourceList = 4;
    string urlFormat = 5;
}

message Data {
    int32 id = 1; //id={0}
    string filepath = 2;
    string name = 3; //name={1}
    int32 size = 4; //size={2}
    uint32 crc = 5; //crc={3}
    repeated int32 tags = 6; //tags=[{4}]
    int32 priority = 7;
    repeated int32 deps = 8; //deps=[{5}]
    State state = 9; //state={6}?
    string md5 = 10; //md5={7}
    string objectName = 11; //objectName={8}
    uint64 generation = 12; //generation={9}
	enum State {
		NONE = 0;
		ADD = 1;
		UPDATE = 2;
		LATEST = 3;
		DELETE = 4;
	}
}
```

### æå–å¯†é’¥

~~ä½ ä»¥ä¸ºdumpå‡º `global-metadata.dat` ç­‰æœ‰ç”¨å—? ä¸, è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨. æˆ‘ä»¬å°†é‡‡å–ä¸€ç§æœ€æ–¹ä¾¿çš„åŠžæ³•, dumpå†…å­˜.~~

æ³¨æ„åˆ°å…ˆè¾ˆé—äº§ä¸­çš„ä»£ç ç‰‡æ®µ

```python
    # All currently known magic numbers to try
    en = ("st4q3c7p1ibgwdhm", "LvAUtf+tnz")
    jp = ("p4nohhrnijynw45m", "LvAUtf+tnz")
    encbt = ("p4nohhrnijynw45m", "LvAUtf+tnz")
    jpcbt = ("ezj749zwskuskg46", "LvAUtf+tnz")
```

æ³¨æ„åˆ°IVå…¶å®žæ˜¯ä¸å˜çš„(~~è¿™å¯¹äºŽæ‰€æœ‰ä½¿ç”¨äº†octoçš„æ¸¸æˆIVéƒ½æ˜¯ä¸å˜çš„~~), å¯åŠ¨Nire, åœ¨ `GameGuardian` ä¸­ç”¨IVæœä¸€æœ, å¾—åˆ°å†…å­˜èŒƒå›´å†dumpå‡ºå†…å­˜ç‰‡æ®µ.

æ³¨æ„åˆ°IVé™„è¿‘çš„å†…å®¹, å…¶ä¸­æœ‰ä¸€æ®µæ˜¯æˆ‘ä»¬çš„Key, æŒ‰è‘«èŠ¦ç”»ç“¢ä¾¿å¯ä»¥å¾—åˆ°Jujutsu Kaisen Phantom Paradeçš„å¯†é’¥

> è¿™æ˜¯ä»€ä¹ˆå‘¢?
>
> U2FsdGVkX18IhwXLCGzYEBKTdqrPt91MVF3avXiuaKJN5cQME2qOEmsCKnybO1+k7I2GKXBbCoLUIwVMmN80wQ==
>
> Hint: AeS Key:Game Domain

èŽ·å¾—åˆ°å¯†é’¥ä¹‹åŽä½ å°±å¯ä»¥ä½¿ç”¨[Nireçš„è§£åŒ…](https://github.com/190nm/rein-kuro)è§£å¯†èµ„æºæ¸…å•åˆ°ä¸‹ä¸€æ­¥.

### è§£å¯†èµ„æº

~~ä½ ä»¥ä¸ºè§£å¯†ä¸€ä¸ªèµ„æºæ¸…å•æœ‰ä»€ä¹ˆç”¨å—? å“ˆå“ˆå…¶å®žèµ„æºä¹Ÿæ˜¯åŠ å¯†çš„~~

èµ„æºæ€»çš„æ¥è¯´åˆ†ä¸¤ç§: ä¸€ç§æ˜¯ `Asset Bundle` ä¸€ç§æ˜¯èµ„æºæ–‡ä»¶(å­˜å‚¨è¯­éŸ³å’Œè§†é¢‘)

æˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯æå– `Asset Bundle` , èµ„æºæ–‡ä»¶å¤§éƒ¨åˆ†æ˜¯ä½¿ç”¨ `Criware` åŠ å¯†

~~æ­£å½“ä½ ä»¥ä¸ºå‰é¢å…ˆè¾ˆçš„é—äº§æœ‰ç”¨, æ­£å½“ä½ ä»¥ä¸ºdumpå‡º `global-metadata.dat` ç­‰æœ‰ç”¨. å…¶å®žéƒ½é”™äº†.~~

å½“ä½ æ‹–è¿›IDAæ‰¾åˆ°å¯¹åº”çš„è§£å¯†å‡½æ•°æ—¶å…¶å®žæ ¹æœ¬å°±æ‰¾ä¸å‡ºå…ˆè¾ˆæ‰¾å‡ºæ¥çš„é‚£å‡ ä¸ªå‡½æ•°, å› æ­¤æˆ‘ä»¬ä¾¿å¯ä»¥åˆ¤æ–­ä¸æ˜¯å’ŒNireç­‰ä¸€æ ·çš„åŠ å¯†.

æ³¨æ„åˆ°ç¨‹åºè°ƒç”¨äº†`FastAES`å’Œå¦ä¸€ä½[å…ˆè¾ˆçš„é—äº§](https://github.com/sainz1407/Jujutsu-Kaisen-Phantom-Parade), å…¶å®žèµ„æºæ–‡ä»¶çš„åŠ å¯†æ˜¯AES

> ~~TMDèŠ±äº†æˆ‘å‡ å¤©æ—¶é—´, æˆ‘è¿˜ä»¥ä¸ºæ²¡å˜. è¿˜æ˜¯å…ˆè¾ˆæ‹¯æ•‘äº†æˆ‘~~

### EOF 1

å…¶å®žåˆ°è¿™é‡Œå¤§éƒ¨åˆ†è§£åŒ…çš„åŸºç¡€å°±å·²ç»å®Œæˆ, æŽ¥ä¸‹æ¥æ˜¯å¯¹è§£åŒ…å‡ºæ¥çš„ `.unity3d` è¿›è¡ŒåŠ å·¥.

## èµ„æºçš„è¿ç”¨

> ERROR: æœ¬Sectionæ­£åœ¨æ–½å·¥ä¸­...
